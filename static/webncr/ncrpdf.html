<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>pdf显示</title>
    <link rel='stylesheet' href="index.css" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes" />
    <script src="jquery.js"></script>
    <script src="pdfjs/pdf.js" type="text/javascript"></script>
    <style type="text/css">
        .lightbox{
            position: fixed;
            top: 0px;
            left: 0px;
            height: 100%;
            width: 100%;
            z-index: 7;
            opacity: 0.3;
            display: block;
            background-color: rgb(0, 0, 0);
        }
        .pop{
            position: absolute;
            width: 650px;
            z-index: 9;
        }
      </style>
</head>

<body>
  <div id="container" style="display: none;">
          <div class="lightbox"></div>
          <div id="pop" class="pop">
          </div>
      </div>

</body>

<script type="text/javascript">
    getQueryStringByName = function(name){
        var result = location.search.match(new RegExp("[\?\&]" + name + "=([^\&]+)", "i"));
        if (result == null || result.length < 1) {
            return "";
        }
        return decodeURI(result[1]);
    }

    var file1 = "./NCR/file/N753/N753-H-086%20reply.pdf";
    var file2 = "./NCR/file/"+getQueryStringByName("file");
    window.onload = function (){
              var container = document.getElementById("container");
              container.style.display = "block";
              var container2 = document.getElementById("pop");
              var url = file2;
              var num;
              var idArray=[0];
              var b=0;
              PDFJS.workerSrc = 'pdfjs/pdf.worker.js';
              PDFJS.getDocument(url).then(function getPdfHelloWorld(pdf) {
                    num = pdf.pdfInfo.numPages;
                    for(var i=1;i<=num;i++){
                        var op = document.createElement("canvas");
                        op.id = "the-canvas"+i;
                        container2.append(op);
                        idArray[i] = i;
                        pdf.getPage(i).then(function getPageHelloWorld(page) {
                            b++;
                            var scale = 1;
                            var viewport = page.getViewport(scale);
                            var canvas = document.getElementById('the-canvas'+b);
                            var context = canvas.getContext('2d');
                            canvas.height = viewport.height;
                            canvas.width = viewport.width;
                            var renderContext = {
                                canvasContext: context,
                                viewport: viewport
                            };
                            page.render(renderContext);
                            return b;
                        });
                    }
              });
         
    };

    
</script>

</html>